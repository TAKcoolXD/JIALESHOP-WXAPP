{"version":3,"sources":["uni-app:///src/main.js","webpack:///./src/pages/login/login.vue?f019","webpack:///./src/pages/login/login.vue?03b9","webpack:///./src/pages/login/login.vue?1f19","webpack:///./src/pages/login/login.vue?2323","uni-app:///src/pages/login/login.vue"],"names":["require","_vue","_interopRequireDefault","_login","wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","userInfo","nickName","avatarUrl","gender","code","show","methods","goLogin","_this","console","log","uni","login","provider","success","loginRes","getUserInfo","infoRes","setStorageSync","form","partyData","oauth","$u","http","post","then","res","status","$refs","uToast","message","position","type","duration","complete","pages","getCurrentPages","page","length","page1","$page","fullPath","navigateBack","delta","token"],"mappings":"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","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=b237504c&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=b237504c&\"","var components\ntry {\n  components = {\n    uLoadingPage: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-loading-page/u-loading-page\" */ \"uview-ui/components/u-loading-page/u-loading-page.vue\"\n      )\n    },\n    uToast: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-toast/u-toast\" */ \"uview-ui/components/u-toast/u-toast.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"login\" style=\"width: 750rpx;height: 1200rpx;\">\n\t\t<view\n\t\t\tstyle=\"margin: 40rpx auto;width: 700rpx;height: 320rpx;border-bottom: 2px solid #ededed;display: flex;justify-content: center;align-items: center;\">\n\t\t\t<image src=\"../../static/default-logo.png\" mode=\"scaleToFill\" style=\"width: 200rpx;height: 200rpx;\" />\n\t\t</view>\n\t\t<view style=\"margin-left: 50rpx;\">\n\t\t\t<view style=\"margin: 40rpx 0;\">申请获取以下权限</view>\n\t\t\t<view style=\"font-size: 30rpx;color: #aaaaaa;\">获得你得公开信息</view>\n\t\t</view>\n\t\t<view style=\"width: 600rpx;margin: 80rpx auto;\">\n\t\t\t<view\n\t\t\t\tstyle=\"margin: 30rpx 0;padding: 20rpx 50rpx;text-align: center;border-radius: 50rpx;background-color: #ff547b;color: #ededed;\"\n\t\t\t\t@click=\"goLogin\">一键登录</view>\n\t\t\t<view\n\t\t\t\tstyle=\"margin: 30rpx 0;padding: 20rpx 50rpx;text-align: center;border-radius: 50rpx;background-color: #dfdfdf;\">\n\t\t\t\t暂不登录</view>\n\t\t</view>\n\t\t<view>\n\t\t\t<u-loading-page :loading=\"show\"></u-loading-page>\n\t\t</view>\n\t\t<u-toast ref=\"uToast\"></u-toast>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tuserInfo: {\n\t\t\t\tnickName: '',\n\t\t\t\tavatarUrl: '',\n\t\t\t\tgender: '',\n\t\t\t},\n\t\t\tcode: '',\n\t\t\tshow: false,\n\t\t}\n\t},\n\tmethods: {\n\t\tgoLogin() {\n\t\t\tconsole.log('登录');\n\t\t\tthis.show = true\n\t\t\tuni.login({\n\t\t\t\tprovider: 'weixin', //使用微信登录\n\t\t\t\tsuccess: (loginRes) => {\n\t\t\t\t\tconsole.log('登录code', loginRes);\n\t\t\t\t\t// console.log(loginRes.authResult);\n\t\t\t\t\tthis.code = loginRes.code;\n\t\t\t\t\tuni.getUserInfo({\n\t\t\t\t\t\tprovider: 'weixin',\n\t\t\t\t\t\tsuccess: (infoRes) => {\n\t\t\t\t\t\t\tconsole.log('获取用户信息', infoRes);\n\t\t\t\t\t\t\tconsole.log('用户昵称为：' + infoRes.userInfo.nickName);\n\t\t\t\t\t\t\tconsole.log('用户昵称为：' + infoRes.userInfo.avatarUrl);\n\t\t\t\t\t\t\tconsole.log('用户昵称为：' + infoRes.userInfo.gender);\n\t\t\t\t\t\t\tthis.userInfo.nickName = infoRes.userInfo.nickName\n\t\t\t\t\t\t\tthis.userInfo.avatarUrl = infoRes.userInfo.avatarUrl\n\t\t\t\t\t\t\tthis.userInfo.gender = infoRes.userInfo.gender\n\n\t\t\t\t\t\t\tuni.setStorageSync('UserInfo', this.userInfo);\n\t\t\t\t\t\t\tlet data = {\n\t\t\t\t\t\t\t\tform: {\n\t\t\t\t\t\t\t\t\tpartyData: {\n\t\t\t\t\t\t\t\t\t\toauth: 'MP-WEIXIN',\n\t\t\t\t\t\t\t\t\t\tuserInfo: this.userInfo,\n\t\t\t\t\t\t\t\t\t\tcode: this.code\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsole.log(data, '123');\n\n\t\t\t\t\t\t\tuni.$u.http.post('passport/loginMpWx', data).then(res => {\n\t\t\t\t\t\t\t\tconsole.log(res, '打印结果');\n\t\t\t\t\t\t\t\tif (res.status == 200) {\n\t\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\t\tthis.$refs.uToast.show({\n\t\t\t\t\t\t\t\t\t\tmessage: '登录成功',\n\t\t\t\t\t\t\t\t\t\tposition: 'top',\n\t\t\t\t\t\t\t\t\t\ttype: 'default',\n\t\t\t\t\t\t\t\t\t\tduration: 1000,\n\t\t\t\t\t\t\t\t\t\tcomplete() {\n\t\t\t\t\t\t\t\t\t\t\tvar pages = getCurrentPages();\n\t\t\t\t\t\t\t\t\t\t\tvar page = pages[pages.length - 1];\n\t\t\t\t\t\t\t\t\t\t\tvar page1 = pages[pages.length - pages.length];\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('获取所有页面', pages);\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('获取当前页面', page.$page.fullPath);\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('从哪个页面过来', page1.$page.fullPath);\n\t\t\t\t\t\t\t\t\t\t\tif (page1.$page.fullPath == '/pages/User/User' ) {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('1');\n\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t} else if (page1.$page.fullPath == '/pages/index/index') {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\t\t\t\t\t\tdelta: 2\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('token', res.data.token);\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\n\t\t}\n\t},\n}\n</script>\n<!-- https://yoshop-test.azhuquq.com/index.php?s=/api/passport/loginMpWx -->\n<style></style>\n"],"sourceRoot":""}